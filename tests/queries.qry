Grabe-able items:
* lesson
* scorm
* workshop


LMS Coursework
<?xml version="1.0" encoding="utf-8"?>
<lmsCourseworkItems university=“university_opeid”>
    <lmsCourseworkItem>
        <enrollmentId></enrollmentId>
        <studentId></studentId>
        <courseId></courseId>
        <sectionId></sectionId>
        <itemType></itemType>
        <itemId></itemId>
        <itemName></itemName>
        <dueDate></dueDate>
        <dateSubmitted></dateSubmitted>
        <pointsPossible></pointsPossible>
        <pointsReceived></pointsReceived>
        <gradeCategory></gradeCategory>
        <categoryWeight></categoryWeight>
        <extensions></extensions>
    </lmsCourseworkItem>
</lmsCourseworkItems>

# Grabs all student idnumbers in all courses in the current semester.
# May prove useful for you.

SELECT
    u.idnumber AS studentId,
    c.idnumber AS moodleCourseIdNumber,
    c.id AS moodleCourseId
FROM mdl_course AS c
    INNER JOIN mdl_context AS ctx ON c.id = ctx.instanceid
    INNER JOIN mdl_role_assignments AS ra ON ra.contextid = ctx.id
    INNER JOIN mdl_user AS u ON u.id = ra.userid
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON u.id = ustu.userid AND us.id = ustu.sectionid
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
WHERE ra.roleid IN (5)
    AND ustu.status = 'enrolled'
    AND usem.classes_start < UNIX_TIMESTAMP(NOW())
    AND usem.grades_due > UNIX_TIMESTAMP(NOW())
ORDER BY moodleCourseIdNumber




# GET ME SOME QUIZZES

SELECT
    DISTINCT(mma.id) AS quizAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'quiz' AS itemType,
    mm.name AS itemName,
    mm.timeclose AS dueDate,
    mma.timefinish AS dateSubmitted,
    mm.grade AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_quiz mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'quiz' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    LEFT JOIN mdl_quiz_attempts mma ON mm.id = mma.quiz AND u.id = mma.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'






# GET ME SOME ASSIGNMENTS

SELECT
    DISTINCT(mma.id) AS modAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'assignment' AS itemType,
    mm.name AS itemName,
    mm.duedate AS dueDate,
    mma.timemodified AS dateSubmitted,
    mm.grade AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_assign mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'assign' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    LEFT JOIN mdl_assign_submission mma ON mm.id = mma.assignment AND u.id = mma.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'






# GET ME SOME ASSIGNMENTS (2.2)

SELECT
    DISTINCT(mma.id) AS modAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'assignment' AS itemType,
    mm.name AS itemName,
    mm.timedue AS dueDate,
    mma.timemodified AS dateSubmitted,
    mm.grade AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_assignment mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'assignment' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    LEFT JOIN mdl_assignment_submissions mma ON mm.id = mma.assignment AND u.id = mma.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'












# GET ME SOME DATABASES

SELECT
    DISTINCT(mma.id) AS modAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'database' AS itemType,
    mm.name AS itemName,
    mm.timeavailableto AS dueDate,
    mma.timemodified AS dateSubmitted,
    mm.scale AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_data mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'data' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    LEFT JOIN mdl_data_records mma ON mm.id = mma.dataid AND u.id = mma.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'










# GET ME SOME FORUMS

SELECT
    DISTINCT(mma.id) AS modAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'forum' AS itemType,
    mm.name AS itemName,
    mm.assesstimefinish AS dueDate,
    mmap.modified AS dateSubmitted,
    mm.scale AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_forum mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'forum' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    INNER JOIN mdl_forum_discussions mma ON mm.id = mma.forum
    LEFT JOIN mdl_forum_posts mmap ON mma.id = mmap.discussion AND u.id = mmap.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'










# GET ME SOME FORUMNGS

SELECT
    DISTINCT(mma.id) AS modAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'forum' AS itemType,
    mm.name AS itemName,
    mm.ratinguntil AS dueDate,
    mmap.modified AS dateSubmitted,
    mm.ratingscale AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_forumng mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'forumng' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    INNER JOIN mdl_forumng_discussions mma ON mm.id = mma.forumngid
    LEFT JOIN mdl_forumng_posts mmap ON mma.id = mmap.discussionid AND u.id = mmap.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'












# GET ME SOME GLOSSARIES

SELECT
    DISTINCT(mma.id) AS modAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'glossary' AS itemType,
    mm.name AS itemName,
    mm.assesstimefinish AS dueDate,
    mma.timemodified AS dateSubmitted,
    mm.scale AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_glossary mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'glossary' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    LEFT JOIN mdl_glossary_entries mma ON mm.id = mma.glossaryid AND u.id = mma.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'













# GET ME SOME HOTPOTS

SELECT
    DISTINCT(mma.id) AS modAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'hotpot' AS itemType,
    mm.name AS itemName,
    mm.timeclose AS dueDate,
    mma.timefinish AS dateSubmitted,
    mm.gradeweighting AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_hotpot mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'hotpot' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    LEFT JOIN mdl_hotpot_attempts mma ON mm.id = mma.hotpotid AND u.id = mma.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'











# GET ME SOME KALVIDASSIGNS

SELECT
    DISTINCT(mma.id) AS modAttemptId,
    mm.id AS courseModuleId,
    CONCAT(usem.year,u.idnumber,LPAD(c.id,5,'0'),us.sec_number) AS enrollmentId,
    u.username as pawsId,
    u.idnumber AS studentId,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    us.sec_number AS sectionId,
    'kalvidassign' AS itemType,
    mm.name AS itemName,
    mm.timedue AS dueDate,
    mma.timemodified AS dateSubmitted,
    mm.grade AS pointsPossible,
    mgg.finalgrade AS pointsReceived,
    mgc.fullname AS gradeCategory,
    (cats.categoryWeight * 100) AS categoryWeight,
    NULL AS extensions
FROM mdl_course c
    INNER JOIN mdl_kalvidassign mm ON mm.course = c.id
    INNER JOIN mdl_enrol_ues_sections us ON c.idnumber = us.idnumber
    INNER JOIN mdl_enrol_ues_students ustu ON ustu.sectionid = us.id AND ustu.status = 'enrolled'
    INNER JOIN mdl_user u ON ustu.userid = u.id
    INNER JOIN mdl_enrol_ues_semesters usem ON usem.id = us.semesterid
    INNER JOIN mdl_enrol_ues_courses uc ON uc.id = us.courseid
    INNER JOIN mdl_grade_items mgi ON
        mgi.courseid = c.id AND
        mgi.itemtype = 'mod' AND
        mgi.itemmodule = 'kalvidassign' AND
        mgi.iteminstance = mm.id
    INNER JOIN mdl_grade_categories mgc ON (mgc.id = mgi.iteminstance OR mgc.id = mgi.categoryid) AND mgc.courseid = c.id
    LEFT JOIN mdl_grade_grades mgg ON mgi.id = mgg.itemid AND mgg.userid = u.id
    LEFT JOIN mdl_kalvidassign_submission mma ON mm.id = mma.vidassignid AND u.id = mma.userid
    LEFT JOIN
        (SELECT
            mgi2.courseid AS catscourse,
            mgi2.id AS catsid,
            mgi2.iteminstance AS catcatid,
            mgi2.aggregationcoef AS categoryWeight
        FROM mdl_grade_items mgi2
            INNER JOIN mdl_grade_categories mgc2 ON mgc2.id = mgi2.iteminstance AND mgc2.courseid = '4872'
            AND mgi2.itemtype = 'category')
        cats ON cats.catscourse = c.id AND mgc.id = cats.catcatid
WHERE c.id = '4872'







LMS Section Group
<?xml version="1.0" encoding="utf-8"?>
<lmsSectionGroups university=“university_opeid”>
    <lmsSectionGroup>
        <sectionId></sectionId>
        <groupId></groupId>
        <groupName></groupName>
        <courseId></courseId>
        <primaryInstructorId></primaryInstructorId>
        <primaryInstructorFname></primaryInstructorFname>
        <primaryInstructorLname></primaryInstructorLname>
        <primaryInstructorEmail></primaryInstructorEmail>
        <coachId></coachId>
        <coachFirstName></coachFirstName>
        <coachLastName></coachLastName>
        <coachEmail></coachEmail>
        <extensions></extensions>
    </lmsSectionGroup>
</lmsSectionGroups>

#Primary Instructors

SELECT
    CONCAT(g.id,u.idnumber) AS userGroupId,
    us.sec_number AS sectionId,
    g.id AS groupId,
    g.name AS groupName,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    u.idnumber AS primaryInstructorId,
    u.firstname AS primaryInstructorFname,
    u.lastname AS primaryInstructorLname,
    u.email AS primaryInstructorEmail,
    NULL AS coachId,
    NULL AS coachFirstName,
    NULL AS coachLastName,
    NULL AS coachEmail,
    NULL AS extensions
FROM mdl_course AS c
    INNER JOIN mdl_enrol_ues_sections AS us ON c.idnumber = us.idnumber
        AND us.idnumber IS NOT NULL
        AND c.idnumber IS NOT NULL
        AND us.idnumber <> ''
        AND c.idnumber <> ''
    INNER JOIN mdl_enrol_ues_courses AS uc ON uc.id = us.courseid
    INNER JOIN mdl_enrol_ues_semesters AS usem ON usem.id = us.semesterid
    INNER JOIN mdl_groups AS g ON c.id = g.courseid
    INNER JOIN mdl_context AS ctx ON c.id = ctx.instanceid AND ctx.contextlevel = 50
    INNER JOIN mdl_role_assignments AS ra ON ra.contextid = ctx.id
    INNER JOIN mdl_user AS u ON u.id = ra.userid AND ra.roleid IN (3)
    INNER JOIN mdl_groups_members AS gm ON g.id = gm.groupid AND u.id = gm.userid
WHERE usem.classes_start < UNIX_TIMESTAMP(NOW())
	AND usem.grades_due > UNIX_TIMESTAMP(NOW())
GROUP BY userGroupId

***ra.roleid IN (CONFIGURABLE MULTI SELECT FROM AVAILABLE ROLES)


#All other instructor level users

SELECT
    c.id,
    CONCAT(g.id,u.idnumber) AS userGroupId,
    g.name AS sectionId,
    g.id AS groupId,
    g.name AS groupName,
    CONCAT(RPAD(uc.department,4,' '),'  ',uc.cou_number) AS courseId,
    NULL AS primaryInstructorId,
    NULL AS primaryInstructorFname,
    NULL AS primaryInstructorLname,
    NULL AS primaryInstructorEmail,
    u.idnumber AS coachId,
    u.firstname AS coachFirstName,
    u.lastname AS coachLastName,
    u.email AS coachEmail,
    NULL AS extensions
FROM mdl_course AS c
    INNER JOIN mdl_enrol_ues_sections AS us ON c.idnumber = us.idnumber
        AND us.idnumber IS NOT NULL
        AND c.idnumber IS NOT NULL
        AND us.idnumber <> ''
        AND c.idnumber <> ''
    INNER JOIN mdl_enrol_ues_courses AS uc ON uc.id = us.courseid
    INNER JOIN mdl_enrol_ues_semesters AS usem ON usem.id = us.semesterid
    INNER JOIN mdl_groups AS g ON c.id = g.courseid
    INNER JOIN mdl_context AS ctx ON c.id = ctx.instanceid AND ctx.contextlevel = 50
    INNER JOIN mdl_role_assignments AS ra ON ra.contextid = ctx.id
    INNER JOIN mdl_user AS u ON u.id = ra.userid AND ra.roleid IN (4,19,20,21)
    INNER JOIN mdl_groups_members AS gm ON g.id = gm.groupid AND u.id = gm.userid
WHERE usem.classes_start < UNIX_TIMESTAMP(NOW())
	AND usem.grades_due > UNIX_TIMESTAMP(NOW())
GROUP BY userGroupId

***ra.roleid IN (CONFIGURABLE MULTI SELECT FROM AVAILABLE ROLES)







LMS Group Membership
<?xml version="1.0" encoding="utf-8"?>
<lmsGroupMembers university=“university_opeid”>
    <lmsGroupMember>
        <sectionId></sectionId>
        <groupId></groupId>
        <studentId></studentId>
        <extensions></extensions>
    </lmsGroupMember>
</lmsGroupMembers>


SELECT
    c.id,
    CONCAT(g.id,u.idnumber) AS userGroupId,
    us.sec_number AS sectionId,
    g.id AS groupId,
    u.idnumber AS studentId,
    NULL AS extensions
FROM mdl_course AS c
    INNER JOIN mdl_enrol_ues_sections AS us ON c.idnumber = us.idnumber
        AND us.idnumber IS NOT NULL
        AND c.idnumber IS NOT NULL
        AND us.idnumber <> ''
        AND c.idnumber <> ''
    INNER JOIN mdl_enrol_ues_courses AS uc ON uc.id = us.courseid
    INNER JOIN mdl_enrol_ues_semesters AS usem ON usem.id = us.semesterid
    INNER JOIN mdl_groups AS g ON c.id = g.courseid
    INNER JOIN mdl_context AS ctx ON c.id = ctx.instanceid AND ctx.contextlevel = 50
    INNER JOIN mdl_role_assignments AS ra ON ra.contextid = ctx.id
    INNER JOIN mdl_user AS u ON u.id = ra.userid AND ra.roleid IN (5)
    INNER JOIN mdl_groups_members AS gm ON g.id = gm.groupid AND u.id = gm.userid
WHERE usem.classes_start < UNIX_TIMESTAMP(NOW())
	AND usem.grades_due > UNIX_TIMESTAMP(NOW())
GROUP BY userGroupId

